import{_ as C}from"./rZCHR-BV.js";import{e as x,f as y,g as m,c,o as s,b as P,F as N,r as w,h as d,w as v,d as $,i as k,t as B,n as L,a as h,j as V,k as b,m as A}from"./fwWmTQQs.js";import{_ as S}from"./CSe8xH_J.js";import{_ as D}from"./CKffwhLg.js";import{u as F}from"./Dt2u6BXH.js";const j={class:"pagination"},z=x({__name:"VPagination",props:{maxPage:{default:1},currentPage:{default:1}},emits:["change-page"],setup(p,{emit:r}){const o=p,{maxPage:a,currentPage:n}=y(o),i=r,g=m(()=>a.value===n.value),l=t=>{e(t)||i("change-page",t)},u=()=>{l(n.value+1)},e=t=>t===n.value;return(t,_)=>(s(),c("div",j,[(s(!0),c(N,null,w(d(a),f=>(s(),k(C,{key:f,class:L(["pagination__button",{"pagination__button--active":e(f)}]),onClick:T=>l(f)},{default:v(()=>[$(B(f),1)]),_:2},1032,["class","onClick"]))),128)),P(C,{class:"pagination__button",disabled:g.value,onClick:u},{default:v(()=>_[0]||(_[0]=[$(" > ",-1)])),_:1,__:[0]},8,["disabled"])]))}}),E={class:"card__description"},H=x({__name:"PostCard",props:{id:{default:""},createdAt:{},title:{default:""},preview:{default:""},image:{default:""},description:{}},setup(p){const r=p,{id:o,title:a,preview:n,image:i}=y(r);return(g,l)=>{const u=S;return s(),k(u,{to:{path:`/post/${d(o)}`},class:"card"},{default:v(()=>[P(D,{src:d(i),alt:d(a),class:"card__image"},null,8,["src","alt"]),h("p",E,B(d(n)),1)]),_:1},8,["to"])}}}),I={class:"container page-content"},M={class:"card-list"},R={key:0},Q=x({__name:"index",setup(p){const r=F(),o=V(1),a=m(()=>r.postList.map(e=>{const t=+e.id+470;return{...e,image:`https://placebear.com/640/${t}`}})),n=m(()=>a.value.length>1),i=m(()=>{if(!n.value)return a.value;const e=(o.value-1)*8,t=e+8;return a.value.slice(e,t)}),g=m(()=>Math.ceil(a.value.length/8)),l=async()=>{try{await r.getPostList()}catch(e){console.error(e)}},u=e=>{o.value=e};return l(),(e,t)=>(s(),c("div",I,[t[0]||(t[0]=h("h1",{class:"page-title"},"Articles",-1)),h("ul",M,[a.value.length?b("",!0):(s(),c("li",R," Список публикаций пуст ")),(s(!0),c(N,null,w(i.value,_=>(s(),c("li",{key:_.id},[P(H,A({ref_for:!0},_),null,16)]))),128))]),n.value?(s(),k(z,{key:0,"current-page":o.value,"max-page":g.value,onChangePage:u},null,8,["current-page","max-page"])):b("",!0)]))}});export{Q as default};
